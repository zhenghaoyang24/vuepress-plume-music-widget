# 音乐播放挂件插件设计文档

## 概述
本项目旨在开发一个基于 VuePress 官方规范的音乐播放器挂件插件，使用 JavaScript Setup 语法编写。该插件将提供一个全局单实例组件，直接渲染在页面 body 下，无需在 Markdown 中手动引入。

## 功能需求

### 核心功能
1. 音乐播放控制：
   - 播放/暂停功能
   - 上一首/下一首切换
   - 进度条拖拽控制
   - 音量调节控制
   
2. 信息展示：
   - 歌曲封面显示
   - 歌曲名称展示
   - 艺术家信息展示

3. 用户界面交互：
   - 组件高度固定为 50px
   - 默认吸附在窗口左侧或右侧边缘
   - 初始状态仅显示封面区域
   - 鼠标悬停时展开完整功能面板
   - 支持拖拽移动并自动吸附到最近边界

### 插件配置
所有配置通过 VuePress 插件配置定义：
1. 歌曲信息列表（必需）
2. 自动播放设置（默认：否）
3. 默认音量（默认：50%）
4. 默认播放歌曲索引（默认：第一首）

## 设计约束
1. 除歌曲信息外，其他配置项均有合理默认值
2. 当指定索引歌曲不存在时自动播放第一首
3. 若未传入任何歌曲信息，则不播放音乐
4. 使用指定的品牌配色方案和高斯模糊背景效果

## 技术规格

### 组件结构设计
- 单文件组件 (.vue)
- 使用 Composition API (JavaScript Setup 语法)
- 全局注册并挂载到 body 元素下

### 样式设计
```css
--vp-c-brand-1: #5086a1;           /* 链接颜色、强调色 */
--vp-c-brand-2: #6aa1b7;           /* 链接、按钮 hover 颜色 */
--vp-c-brand-3: #8cccd5;           /* 背景色、边框色 */
--vp-c-brand-soft: rgba(131, 208, 218, 0.314); /* 辅助色 */
```

### 布局分区
1. 左侧区域：
   - 歌曲封面
   - 歌曲名称
   - 艺术家信息
   
2. 右侧区域：
   - 播放进度条
   - 控制按钮组（上一首/下一首/播放/暂停）
   - 音量调节条

## 实现方案

### 状态管理
- 当前播放状态（播放/暂停）
- 当前播放歌曲索引
- 当前播放进度
- 音量控制值
- 组件位置状态（左/右吸附）

### 核心逻辑流程
1. 组件初始化时读取插件配置
2. 根据配置加载对应歌曲信息
3. 设置初始播放状态和音量
4. 处理用户交互事件：
   - 播放/暂停切换
   - 歌曲切换
   - 进度调整
   - 音量调节
   - 拖拽定位

### UI交互细节
1. 吸附效果实现：
   - 默认定位在窗口边缘
   - 仅显示封面区域（收缩状态）
   - 鼠标悬停展开完整面板
   - 拖拽释放后计算最近边界自动吸附

2. 响应式处理：
   - 窗口大小变化适配
   - 移动端兼容考虑

## 插件集成方案
1. 创建标准 VuePress 插件入口文件
2. 注册全局组件
3. 提供配置选项接口
4. 在客户端生命周期中初始化组件

## 配置参数说明
| 参数 | 类型 | 必需 | 默认值 | 说明 |
|------|------|------|--------|------|
| songs | Array | 是 | [] | 歌曲信息列表 |
| autoPlay | Boolean | 否 | false | 是否自动播放 |
| defaultVolume | Number | 否 | 0.5 | 默认音量（0-1） |
| defaultIndex | Number | 否 | 0 | 默认播放歌曲索引 |

## 歌曲信息数据结构
```javascript
{
  title: '歌曲名称',
  artist: '艺术家',
  cover: '封面图片URL',
  url: '音频文件URL'
}
```}
